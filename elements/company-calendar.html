<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/polymerfire/polymerfire.html">

<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-item/paper-item-body.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/paper-badge/paper-badge.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">


<link rel="import" href="../bower_components/fullcalendar-calendar/fullcalendar-calendar.html">
<link rel="import" href="../bower_components/fullcalendar-calendar/fullcalendar-theme.html">





<dom-module id="company-calendar">
  <template>

    <style>
    
  </style> 

     <firebase-auth 
            app-name="form-polymerfire"
            id="auth" 
            user="{{user}}">
    </firebase-auth>

    <!-- path del calendario-->
     <firebase-query
            id="queryCalendar"
            app-name="form-polymerfire"
            path="/agenda/[[user.uid]]/[[mes]]"
            data="{{calendario}}">
    </firebase-query>

      <firebase-query
            id="queryCalendar"
            app-name="form-polymerfire"
            path="/agenda/[[user.uid]]/5"
            data="{{june}}">
    </firebase-query>




<paper-button raised on-tap="meses">meses</paper-button>

<paper-dropdown-menu label="Meses">
  <paper-listbox class="dropdown-content" selected="1">
     <paper-item>
        <div style="display:inline-block">
          <span>Janeiro</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>

    </paper-item>
     <paper-item>

    <div style="display:inline-block">
          <span>Fevereiro</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>

    </paper-item>

      <paper-item>
        <div style="display:inline-block">
          <span>Março</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
    </paper-item>

    <paper-item>
      <div style="display:inline-block">
          <span>Abril</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
    </paper-item>

      <paper-item>
      <div style="display:inline-block">
          <span>Maio</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
    </paper-item>

    <paper-item>
    <div style="display:inline-block">
          <span>Junho</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
  </paper-item>

  </paper-listbox>
</paper-dropdown-menu>









   <paper-listbox>
    <paper-item>
        <div style="display:inline-block">
          <span>Janeiro</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>

    </paper-item>
    <paper-item>

    <div style="display:inline-block">
          <span>Fevereiro</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>

    </paper-item>
    <paper-item>
        <div style="display:inline-block">
          <span>Março</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
    </paper-item>
    <paper-item>
      <div style="display:inline-block">
          <span>Abril</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
    </paper-item>
    <paper-item>
      <div style="display:inline-block">
          <span>Maio</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
    </paper-item>
    <paper-item>
    <div style="display:inline-block">
          <span>Junho</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
  </paper-item>
  

  
    <paper-item>
        <div style="display:inline-block">
          <span>Julho</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>

    </paper-item>
    <paper-item>
      <div style="display:inline-block">
          <span>Agosto</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
      </paper-item>
    <paper-item>
      <div style="display:inline-block">
          <span>Setembro</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
    </paper-item>
    <paper-item>
      <div style="display:inline-block">
          <span>Outubro</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
    </paper-item>
    <paper-item>
    <div style="display:inline-block">
          <span>Novembro</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
      </paper-item>
    <paper-item>
      <div style="display:inline-block">
          <span>Dezembro</span>
        <paper-badge label="{{monthBadge}}"></paper-badge>
      </div>
    </paper-item>
  </paper-listbox>

 <iron-pages id="monthPages" selected="{{monthSection}}" attr-for-selected="name">
    
    <div name="january">
      <iron-icon icon="clear" on-tap="close"></iron-icon> 
      Janeiro
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Animi ipsam quidem quae accusamus, inventore doloribus recusandae aperiam facilis, culpa, impedit non! Numquam, velit! Minima maxime, eius iusto! Animi suscipit, quaerat!</p>
    </div>  
    <div name="february">
      <iron-icon icon="clear" on-tap="close"></iron-icon> 
      Fevereiro
    </div> 
    <div name="march">
      <iron-icon icon="clear" on-tap="close"></iron-icon> 
      Março
    </div> 
    <div name="april">
      <iron-icon icon="clear" on-tap="close"></iron-icon> 
      Abril
    </div> 
    <div name="may">
      <iron-icon icon="clear" on-tap="close"></iron-icon> 
      Maio
    </div> 
    <div name="june">
      <iron-icon icon="clear" on-tap="close"></iron-icon> 
      Junho

        <template is="dom-repeat" items="[[june]]" as="company">   
    <paper-item>
        <paper-item-body two-line>
        <div>[[company.identificador]]</div>
          <div secondary>Data Revisao: [[company.expireDate]]</div>       
          </paper-item-body>     
      </paper-item>   
  </template> 
    </div> 
    <div name="july">
      <iron-icon icon="clear" on-tap="close"></iron-icon> 
      Julho
    </div> 
    <div name="august">
      <iron-icon icon="clear" on-tap="close"></iron-icon> 
      Agosto
    </div> 
    <div name="setember">
      <iron-icon icon="clear" on-tap="close"></iron-icon> 
      Setembro
    </div> 
    <div name="october">
      <iron-icon icon="clear" on-tap="close"></iron-icon> 
      Outubro
    </div> 
    <div name="november">
      <iron-icon icon="clear" on-tap="close"></iron-icon> 
       Novembro
    </div> 
    <div name="december">
      <iron-icon icon="clear" on-tap="close"></iron-icon> 
      Dezembro
    </div>    

</iron-pages>
   
<!--
    <paper-dropdown-menu label="Seleciona o mês">
  <paper-listbox class="dropdown-content" selected="{{atualMonth}}" on-iron-select="selectMonht">
    <paper-item name="janeiro">janeiro</paper-item>
    <paper-item name="fevereiro">fevereiro</paper-item>
    <paper-item name="março">março</paper-item>
    <paper-item name="abril">abril</paper-item>
    <paper-item name="maio">maio</paper-item>
    <paper-item name="junho">junho</paper-item>
    <paper-item name="julho">julho</paper-item>
    <paper-item name="agosto">agosto</paper-item>
    <paper-item name="setembro">setembro</paper-item>
    <paper-item name="outubro">outubro</paper-item>
    <paper-item name="novembro">novembro</paper-item>
    <paper-item name="dezembro">dezembro</paper-item>
  </paper-listbox>
</paper-dropdown-menu>  -->


 
  <template is="dom-repeat" items="[[calendario]]" as="company">   
    <paper-item>
        <paper-item-body two-line>
        <div>[[company.identificador]]</div>
          <div secondary>Data Revisao: [[company.expireDate]]</div>       
          </paper-item-body>     
      </paper-item>   
  </template> 


  <!--  <template is="dom-repeat" items="[[miArray]]">   


     <paper-item>
        <paper-item-body two-line>
        <div>[[item.grupo]]</div>
         <div secondary>Data Revisao: [[company.expireDate]]</div> 
         <div secondary>Data Revisao: [[item.vencimiento]]</div> 
          </paper-item-body>
       
      </paper-item> 
        
   

  </template> 

<paper-button raised on-tap="test">test</paper-button> -->



  
<!--
<fullcalendar-calendar 
    options=
    id="calendar"
   on-day-click="handleEventClick">
     
   </fullcalendar-calendar> -->


      

  </template>

  <script>
    Polymer({

      is: 'company-calendar',

      properties: {
          mes:{
            type:Number,
          },
          atualDate:{
            type:Date,
            value: new Date()
          },
          atualMonth:Number,
          calendario:Array,
          miArray:{
          type:Array,
          value: function(){return[]}
        },
        vencimiento:Object,
        june:{
          type:Object,
          observer: 'dataChanged'
        },
        monthBadge:Number
       
      },

      

      listbox:function(){
        alert('hola')
      },

 //   setMes:function(){
 //     this.fire('setMes',this.atualMonth)
 //   },

    selectMonht:function(){
      this.mes = this.atualMonth
     },

     viewGroups:function(e){
        this.monthSection = e.currentTarget.id;
        console.log(e.currentTarget.id);
        this.$.grid.style.display = "none",
        this.$.monthPages.style.display = "inline"
     },

     close:function(){
      
        this.$.grid.style.display = "inline";
        this.$.monthPages.style.display = "none"
      },

      dataChanged: function (newData, oldData) {
        
          console.log(newData.length);
          this.monthBadge = this.june.length
        
        
      //  this.monthBadge = '3'
      },

      meses:function(){
        console.log(this.june.length);
        this.janBadge = this.june.length
      },

  
    ready:function(){
      
      this.atualMonth = this.atualDate.getMonth()
     
    },

    test:function(){
      for(var i=0; i < this.calendario.length; i++){
        // console.log(this.calendario[i].expireDate)
        var formattedDates = Date.parse(this.calendario[i].expireDate.toLocaleString().split(' ')[0]);
       // console.log(formattedDates);
       var test = {
          'grupo': this.calendario[i].identificador,
          'vencimiento': new Date(
                          Date.parse(this.calendario[i].expireDate.toLocaleString().split(' ')[0])
                          ).toLocaleString().split(' ')[0],

          };
        
           
       // var fecha = new Date(formattedDates);
       // var fechaFormatada = fecha.toLocaleString().split(' ')[0];
      //  console.log(fechaFormatada);
      //  this.vencimiento = {'vencimiento': fechaFormatada[i]};
        this.push('miArray',test);
        
      }
    },

 


   
    });
  </script>
</dom-module>
